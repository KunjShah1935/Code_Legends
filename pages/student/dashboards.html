<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuizIQ.com</title>
    <link rel="stylesheet" href="../../css/style1.css">
</head>
<body>
    <header>
        <div class="navbar">
            <img src="/assets/logo.png" alt="Logo" class="logo" />
            <div class="nav-links">
                <a href="dashboards.html" class="logo1">Dashboard</a>
                <a href="../login.html" class="logo1">Logout</a>
            </div>
        </div>
    </header>
    <main class="main">
        <div id="quiz-list"></div>
    </main>
    <!-- Modal for Instructions -->
    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <h3>ğŸ“‹ Instructions Before You Start the Quiz</h3>
            <ul style="text-align: left;">
                <li>âœ… Read each question carefully.</li>
                <li>â±ï¸ You will have limited time to complete the quiz.</li>
                <li>ğŸ”˜ Each question has four options but only one is correct.</li>
                <li>ğŸ”„ You can't go back to previous questions once answered.</li>
                <li>ğŸ“ You can attempt the quiz only once.</li>
                <li>ğŸ§  Be honest and avoid external help.</li>
                <li>ğŸ“¶ Ensure a stable internet connection.</li>
            </ul>
            <label>
                <input type="checkbox" id="agreeCheck"> I have read and agree to the instructions.
            </label>
            <div class="modal-buttons">
                <button onclick="closeModal()">Cancel</button>
                <button onclick="proceedToQuiz()">Proceed</button>
            </div>
        </div>
    </div>
    <script>
        let targetUrl = "";
        function openModal(url) {
            targetUrl = url;
            document.getElementById("confirmModal").style.display = "flex";
            document.body.classList.add("modal-open");
            document.getElementById("agreeCheck").checked = false;
        }
        function closeModal() {
            document.getElementById("confirmModal").style.display = "none";
            document.body.classList.remove("modal-open");
        }
        function proceedToQuiz() {
            const checkbox = document.getElementById("agreeCheck");
            if (!checkbox.checked) {
                alert("Please agree to the instructions before proceeding.");
                return;
            }
            window.location.href = targetUrl;
        }
        // Dynamically load quizzes created by teachers
        async function loadQuizzes() {
            const res = await fetch('http://localhost:4000/api/quizzes');
            const quizzes = await res.json();
            const quizList = document.getElementById('quiz-list');
            quizList.innerHTML = '';
            quizzes.forEach(q => {
                quizList.innerHTML += `
                <div class="box">
                    <p><b>${q.title}</b></p>
                    <p>${q.description || ''}</p>
                    <div class="button">
                        <button class="button1" onclick="openModal('takequiz.html?quiz_id=${q.id}')">Start Quiz</button>
                    </div>
                </div>`;
            });
        }
        loadQuizzes();
        // logout
        document.querySelector('.nav-links a[href="signup.html"]')?.addEventListener('click', function(event) {
            event.preventDefault();
            if (confirm("Are you sure you want to logout?")) {
                window.location.href = "../login.html";
            }
        });
    </script>
</body>
</html>
